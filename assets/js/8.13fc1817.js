(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{334:function(s,a,t){s.exports=t.p+"assets/img/wget_ghz.1142bce2.png"},335:function(s,a,t){s.exports=t.p+"assets/img/unarchive_ghz.9ccba330.png"},336:function(s,a,t){s.exports=t.p+"assets/img/grpc_build_finish.1410a81d.png"},337:function(s,a,t){s.exports=t.p+"assets/img/hello_world_compile.973a3738.png"},338:function(s,a,t){s.exports=t.p+"assets/img/hello_world_server_run.f832a6ef.png"},339:function(s,a,t){s.exports=t.p+"assets/img/hello_world_run_result.b7fd57b5.png"},446:function(s,a,t){"use strict";t.r(a);var e=t(10),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"基于ghz进行grpc框架性能压测-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基于ghz进行grpc框架性能压测-1"}},[s._v("#")]),s._v(" 基于ghz进行gRpc框架性能压测（1）")]),s._v(" "),a("h2",{attrs:{id:"_1-ghz介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ghz介绍"}},[s._v("#")]),s._v(" 1 ghz介绍")]),s._v(" "),a("p",[s._v("ghz是一个命令行程序和Go包，用于负载测试和gRPC服务的基准测试。")]),s._v(" "),a("h2",{attrs:{id:"_2-ghz下载与安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ghz下载与安装"}},[s._v("#")]),s._v(" 2 ghz下载与安装")]),s._v(" "),a("p",[s._v("step1 在https://github.com/bojand/ghz/releases下载对应环境的ghz二进制包。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/bojand/ghz/releases/download/v0.110.0/ghz-linux-x86_64.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:t(334),alt:"download ghz package"}})]),s._v(" "),a("p",[s._v("step2 解压ghz压缩包，可得到二进制执行程序文件。")]),s._v(" "),a("p",[s._v("解决后的目录结构如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:t(335),alt:"unarchive ghz package"}})]),s._v(" "),a("h2",{attrs:{id:"_3-ghz命令行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-ghz命令行"}},[s._v("#")]),s._v(" 3 ghz命令行")]),s._v(" "),a("p",[s._v("执行./gzh -h，得到ghz的命令行说明")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("\nusage: ghz "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nFlags:\n  -h, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("                     Show context-sensitive "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("also try --help-long and --help-man"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--config")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                  Path to the JSON or TOML config "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" that specifies all the "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" run settings.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--proto")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                   The Protocol Buffer .proto file.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--protoset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                The compiled protoset file. Alternative to proto. "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-proto")]),s._v(" takes precedence.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--call")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                    A fully-qualified method name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'package.Service/method'")]),s._v(" or "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'package.Service.Method'")]),s._v(" format.\n  -i, --import-paths"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("            Comma separated list of proto "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" paths. The current working directory and the directory of the protocol buffer\n                                 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" are automatically added to the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" list.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cacert")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                  File containing trusted root certificates "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" verifying the server.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cert")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                    File containing client certificate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("public key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", to present to the server. Must also provide "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-key")]),s._v(" option.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                     File containing client private key, to present to the server. Must also provide "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-cert")]),s._v(" option.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cname")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                   Server name override when validating TLS certificate - useful "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" self signed certs.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--skipTLS")]),s._v("                  Skip TLS client verification of the server"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'s certificate chain and host name.\n      --insecure                 Use plaintext and insecure connection.\n      --authority=               Value to be used as the :authority pseudo-header. Only works if -insecure is used.\n      --async                    Make requests asynchronous as soon as possible. Does not wait for request to finish before sending next one.\n  -r, --rps=0                    Requests per second (RPS) rate limit for constant load schedule. Default is no rate limit.\n      --load-schedule="const"    Specifies the load schedule. Options are const, step, or line. Default is const.\n      --load-start=0             Specifies the RPS load start value for step or line schedules.\n      --load-step=0              Specifies the load step value or slope value.\n      --load-end=0               Specifies the load end value for step or line load schedules.\n      --load-step-duration=0     Specifies the load step duration value for step load schedule.\n      --load-max-duration=0      Specifies the max load duration value for step or line load schedule.\n  -c, --concurrency=50           Number of request workers to run concurrently for const concurrency schedule. Default is 50.\n      --concurrency-schedule="const"  \n                                 Concurrency change schedule. Options are const, step, or line. Default is const.\n      --concurrency-start=0      Concurrency start value for step and line concurrency schedules.\n      --concurrency-end=0        Concurrency end value for step and line concurrency schedules.\n      --concurrency-step=1       Concurrency step / slope value for step and line concurrency schedules.\n      --concurrency-step-duration=0  \n                                 Specifies the concurrency step duration value for step concurrency schedule.\n      --concurrency-max-duration=0  \n                                 Specifies the max concurrency adjustment duration value for step or line concurrency schedule.\n  -n, --total=200                Number of requests to run. Default is 200.\n  -t, --timeout=20s              Timeout for each request. Default is 20s, use 0 for infinite.\n  -z, --duration=0               Duration of application to send requests. When duration is reached, application stops and exits. If duration is\n                                 specified, n is ignored. Examples: -z 10s -z 3m.\n  -x, --max-duration=0           Maximum duration of application to send requests with n setting respected. If duration is reached before n requests\n                                 are completed, application stops and exits. Examples: -x 10s -x 3m.\n      --duration-stop="close"    Specifies how duration stop is reported. Options are close, wait or ignore. Default is close.\n  -d, --data=                    The call data as stringified JSON. If the value is \'')]),s._v("@' "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" the request contents are "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" from stdin.\n  -D, --data-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("               File path "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" call data JSON file. Examples: /home/user/file.json or ./file.json.\n  -b, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--binary")]),s._v("                   The call data comes as serialized binary message or multiple count-prefixed messages "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" from stdin.\n  -B, --binary-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("             File path "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the call data as serialized binary message or multiple count-prefixed messages.\n  -m, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--metadata")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                Request metadata as stringified JSON.\n  -M, --metadata-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("           File path "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" call metadata JSON file. Examples: /home/user/metadata.json or ./metadata.json.\n      --stream-interval"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        Interval "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" stream requests between message sends.\n      --stream-call-duration"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   Duration after "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" client will close the stream "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" each streaming call.\n      --stream-call-count"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      Count of messages sent, after "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" client will close the stream "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" each streaming call.\n      --stream-dynamic-messages  In streaming calls, regenerate and apply call template data on every message send.\n      --reflect-metadata"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("        Reflect metadata as stringified JSON used only "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" reflection request.\n  -o, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                  Output path. If none provided stdout is used.\n  -O, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--format")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                  Output format. One of: summary, csv, json, pretty, html, influx-summary, influx-details. Default is summary.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--skipFirst")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("              Skip the first X requests when doing the results tally.\n      --count-errors             Count erroneous "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("non-OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" resoponses "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" stats calculations.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--connections")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            Number of connections to use. Concurrency is distributed evenly among all the connections. Default is "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".\n      --connect-timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("10s      Connection "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the initial connection dial. Default is 10s.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--keepalive")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("              Keepalive "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" duration. Only used "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" present and above "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                    User specified name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the test.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tags")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                    JSON representation of user-defined string tags.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cpus")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("                   Number of cpu cores to use.\n      "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--debug")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("                   The path to debug log file.\n  -e, --enable-compression       Enable Gzip compression on requests.\n      --lb-strategy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("             Client load balancing strategy.\n      --max-recv-message-size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("   Maximum message size the client can receive.\n      --max-send-message-size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("   Maximum message size the client can send.\n  -v, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("                  Show application version.\n\nArgs:\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  Host and port to test.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br")])]),a("h2",{attrs:{id:"_4-程序准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-程序准备"}},[s._v("#")]),s._v(" 4 程序准备")]),s._v(" "),a("h3",{attrs:{id:"_4-1-编译和安装grpc、protocol-buffers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-编译和安装grpc、protocol-buffers"}},[s._v("#")]),s._v(" 4.1 编译和安装gRPC、Protocol Buffers")]),s._v(" "),a("h4",{attrs:{id:"_4-1-1-安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-安装依赖"}},[s._v("#")]),s._v(" 4.1.1 安装依赖")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开发依赖安装")]),s._v("\nyum group info "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Development Tools"')]),s._v("\n\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cmake gcc gcc-c++ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" autoconf automake libtool pkg-config\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pkg-config安葬")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://pkgconfig.freedesktop.org/releases/pkg-config-0.29.2.tar.gz\n\n./configure --with-internal-glib \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" check\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\npkg-config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h4",{attrs:{id:"_4-1-2-下载grpc及其子模块-并编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-下载grpc及其子模块-并编译"}},[s._v("#")]),s._v(" 4.1.2 下载grpc及其子模块，并编译")]),s._v(" "),a("h5",{attrs:{id:"_4-1-2-1-下载grpc源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-1-下载grpc源码"}},[s._v("#")]),s._v(" 4.1.2.1 下载grpc源码")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载grpc源码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/jacen/thirdparty\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone --recurse-submodules "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" v1.50.0 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--depth")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" --shallow-submodules https://github.com/grpc/grpc\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" submodule update "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--init")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载任务中断后，继续")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h5",{attrs:{id:"_4-1-2-2-编译protobuf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-2-编译protobuf"}},[s._v("#")]),s._v(" 4.1.2.2 编译protobuf")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译protobuf")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/protocolbuffers/protobuf/releases/download/v21.6/protobuf-all-21.6.tar.gz "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#v2.6")]),s._v("\n./configure "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--prefix")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/protobuf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-j8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\nldconfig\n/usr/local/protobuf/bin/protoc "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#验证")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h5",{attrs:{id:"_4-1-2-3-编译grpc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-3-编译grpc"}},[s._v("#")]),s._v(" 4.1.2.3 编译grpc")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译grpc")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 由于centos 7 gcc版本较低，升级下版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sf")]),s._v(" /usr/local/gcc7.3.0/bin/gcc /usr/bin/cc\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sf")]),s._v(" /usr/local/gcc7.3.0/bin/g++ /usr/bin/c++\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home/jacen/thirdparty/grpc\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" cmake/build\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" cmake/build\n\ncmake "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DCMAKE_INSTALL_PREFIX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/grpc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DCMAKE_BUILD_TYPE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Release "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DgRPC_INSTALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DBUILD_SHARED_LIBS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DgRPC_BUILD_TESTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("OFF "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DgRPC_ZLIB_PROVIDER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("package "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DgRPC_PROTOBUF_PROVIDER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("package "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DgRPC_SSL_PROVIDER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("package "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DProtobuf_INCLUDE_DIR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/protobuf/include "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DProtobuf_LIBRARY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/protobuf/lib/libprotobuf.so "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DProtobuf_PROTOC_LIBRARY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/protobuf/lib/libprotoc.so "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DProtobuf_PROTOC_EXECUTABLE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/protobuf/bin/protoc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-j8")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("p",[a("img",{attrs:{src:t(336),alt:"build grpc finish"}})]),s._v(" "),a("h3",{attrs:{id:"_4-2-简单的测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-简单的测试"}},[s._v("#")]),s._v(" 4.2 简单的测试")]),s._v(" "),a("h4",{attrs:{id:"_4-2-1-proto文件准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-proto文件准备"}},[s._v("#")]),s._v(" 4.2.1 proto文件准备")]),s._v(" "),a("p",[s._v("使用example中的helloworld进行测试，文件为：https://github.com/grpc/grpc/blob/master/examples/protos/helloworld.proto")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helloworld.proto")]),s._v("\nsyntax "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"proto3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\npackage helloworld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n// The greeting "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" definition.\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" Greeter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  // Sends a greeting\n  rpc SayHello "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HelloRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" returns "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HelloReply"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n// The request message containing the user's name.\nmessage HelloRequest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  string name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n// The response message containing the greetings\nmessage HelloReply "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  string message "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h4",{attrs:{id:"_4-2-2-执行简单的测试初体验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-执行简单的测试初体验"}},[s._v("#")]),s._v(" 4.2.2 执行简单的测试初体验")]),s._v(" "),a("h5",{attrs:{id:"_4-2-2-1-编译、启动服务端程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-1-编译、启动服务端程序"}},[s._v("#")]),s._v(" 4.2.2.1 编译、启动服务端程序")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" examples/cpp/helloworld\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" cmake/build\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pushd")]),s._v(" cmake/build\ncmake "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DCMAKE_PREFIX_PATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/protobuf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-j")]),s._v("\n./gretter_server\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("img",{attrs:{src:t(337),alt:"hello world compile"}})]),s._v(" "),a("p",[a("img",{attrs:{src:t(338),alt:"hello world server run"}})]),s._v(" "),a("h5",{attrs:{id:"_4-2-2-2-启动ghz-cli客户端测试程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-2-启动ghz-cli客户端测试程序"}},[s._v("#")]),s._v(" 4.2.2.2 启动GHZ CLI客户端测试程序")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("/home/jacen/thirdparty/ghz/ghz "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--insecure")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--proto")]),s._v(" ./helloworld.proto "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--call")]),s._v(" helloworld.Greeter.SayHello "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"name":"Joe"}\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:50051\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者利用server reflection 忽略proto")]),s._v("\n/home/jacen/thirdparty/ghz/ghz "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--insecure")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--call")]),s._v(" helloworld.Greeter.SayHello "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"name":"Joe"}\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:50051\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("得到结果：")]),s._v(" "),a("p",[a("img",{attrs:{src:t(339),alt:"hello world run test result"}})]),s._v(" "),a("h5",{attrs:{id:"_4-2-2-3-结果解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-3-结果解释"}},[s._v("#")]),s._v(" 4.2.2.3 结果解释")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[s._v("输出项")]),s._v(" "),a("th",{staticStyle:{"text-align":"left"}},[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("count")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("已完成的请求总数，包括成功的和失败的请求。")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("total")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("从开始到结束的测试总时间。")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("slowest")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("最慢的请求的耗时。")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("fastest")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("最快的请求的耗时。")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("average")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("平均的请求耗时.")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("requests/sec")]),s._v(" "),a("td",{staticStyle:{"text-align":"left"}},[s._v("每秒的请求数量，计算公式：count/total。")])])])]),s._v(" "),a("h2",{attrs:{id:"_5-参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-参考资料"}},[s._v("#")]),s._v(" 5 参考资料")]),s._v(" "),a("ul",[a("li",[s._v("ghz")])]),s._v(" "),a("p",[s._v("https://ghz.sh/")]),s._v(" "),a("p",[s._v("https://ghz.sh/docs/output")]),s._v(" "),a("ul",[a("li",[s._v("grpc cpp quickstart")])]),s._v(" "),a("p",[s._v("https://grpc.io/docs/languages/cpp/quickstart/")]),s._v(" "),a("ul",[a("li",[s._v("gRPC doc")])]),s._v(" "),a("p",[s._v("https://doc.oschina.net/grpc?t=57966")])])}),[],!1,null,null,null);a.default=n.exports}}]);