(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{412:function(t,e,a){t.exports=a.p+"assets/img/iperf3_compile_finish.add35638.png"},413:function(t,e,a){t.exports=a.p+"assets/img/iperf3_usage.6d4bea44.png"},414:function(t,e,a){t.exports=a.p+"assets/img/iperf3_server.b3b7edcb.png"},415:function(t,e,a){t.exports=a.p+"assets/img/iperf3_client.0f373c3e.png"},460:function(t,e,a){"use strict";a.r(e);var s=a(10),i=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"网络带宽性能分析工具iperf3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#网络带宽性能分析工具iperf3"}},[t._v("#")]),t._v(" 网络带宽性能分析工具iPerf3")]),t._v(" "),e("h2",{attrs:{id:"_1-iperf3介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-iperf3介绍"}},[t._v("#")]),t._v(" 1 iPerf3介绍")]),t._v(" "),e("p",[t._v("iPerf3是一个支持TCP、UDP、SCTP网络的带宽测量工具。")]),t._v(" "),e("h2",{attrs:{id:"_2-iperf3下载、安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-iperf3下载、安装"}},[t._v("#")]),t._v(" 2 iPerf3下载、安装")]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 两种方式：")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载github源码")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone \nhttps://github.com/esnet/iperf.git "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.12")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者直接下载源码包")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://downloads.es.net/pub/iperf/iperf-3.0.1.tar.gz\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编译")]),t._v("\n./configure"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br")])]),e("p",[e("img",{attrs:{src:a(412),alt:"iper3 compile finish"}})]),t._v(" "),e("h2",{attrs:{id:"_3-iperf3使用指导"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-iperf3使用指导"}},[t._v("#")]),t._v(" 3 iPerf3使用指导")]),t._v(" "),e("p",[e("img",{attrs:{src:a(413),alt:"iperf3 usage"}})]),t._v(" "),e("h2",{attrs:{id:"_4-实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-实践"}},[t._v("#")]),t._v(" 4 实践")]),t._v(" "),e("p",[t._v("在云服务器上启动iperf3的server端：")]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("iperf "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:a(414),alt:"iperf3 server"}})]),t._v(" "),e("p",[t._v("在云服务器上启动iperf3的client端：")]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("iperf3 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:a(415),alt:"iperf3 client"}})]),t._v(" "),e("p",[t._v("不同组合下的结果如下：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("server")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("client")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("bandwidth")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 4K -P 4")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("3.96 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 4K -P 8")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("4.12 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 4K -P 16")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("4.27 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 32K -P 2")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("23.3 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 32K -P 4")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("25.0 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 32K -P 8")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("26.1 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 64K -P 1")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("31.7 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 64K -P 2")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("31.7 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 64K -P 4")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("31.0 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 64K -P 8")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("30.4 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 128K -P 2")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("40.5 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 128K -P 4")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("38.9 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 128K -P 8")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("38.3 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 256K -P 2")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("46.3 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 256K -P 4")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("44.8 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 256K -P 8")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("42.7 Gb/s")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf -s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iperf3 -O 4 -c 127.0.0.1 -i 2 -t 20 -w 256K -P 16")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("41.9 Gb/s")])])])]),t._v(" "),e("p",[t._v("基于本文使用的4核GB云服务器环境的结果数据，可以看到：\n随着客户端的buffer size、并发数递增，测得的带宽结果呈现递增趋势。但到一定程度就不会增长了，软件的能力受限于硬件（网卡带宽、CPU核数&性能等因素）。")]),t._v(" "),e("h2",{attrs:{id:"_5-参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-参考资料"}},[t._v("#")]),t._v(" 5 参考资料")]),t._v(" "),e("ul",[e("li",[t._v("iPerf")])]),t._v(" "),e("p",[t._v("https://iperf.fr/")]),t._v(" "),e("p",[t._v("https://github.com/esnet/iperf")]),t._v(" "),e("ul",[e("li",[t._v("iPerf3 usage")])]),t._v(" "),e("p",[t._v("https://fasterdata.es.net/performance-testing/network-troubleshooting-tools/iperf/")])])}),[],!1,null,null,null);e.default=i.exports}}]);